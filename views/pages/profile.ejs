<link rel="stylesheet" href="/assets/css/profile.css">
<div id="profile" class="flex col gap-16">
    <%- include('../partials/statSettings') %>
    <%- include('../partials/profile/cardImportProgress', { updateStatus }) %>
    <div id="profileContent" class="card flex col gap-8">
        <div class="banner relative rounded-8 w-full" style="background-image: url('<%= user.banner_url %>')">
            <div class="buttons absolute flex row-rev gap-8 flex-wrap">
                <a class="btn translucent square" href="https://osu.ppy.sh/users/<%= user.id %>" target="_blank"
                    title="View profile on osu! website">
                    <span class="icon">open_in_new</span>
                </a>
                <button class="btn translucent" onClick="document.getElementById('sharePopup').showModal();">
                    <span class="icon">share</span>
                    <span>share & embed...</span>
                </button>
                <!-- Popup for share and embed -->
                <dialog id="sharePopup" class="popup" style="--width: 800px; --height: 900px">
                    <div class="title">Share profile</div>
                    <%- include('../partials/profile/sharePopupBody') %>
                    <div class="actions">
                        <button class="btn medium" id="sharePopupClose">Close</button>
                    </div>
                </dialog>
                <!-- Basic JS for showing share popup -->
                <script>
                    document.getElementById('sharePopupClose').addEventListener('click', () => {
                        const elSharePopup = document.getElementById('sharePopup');
                        elSharePopup.close();
                    });
                </script>
            </div>
        </div>
        <div class="basics overflow-hidden flex gap-16 align-center">
            <img src="<%= user.avatar_url %>" class="avatar rounded-24">
            <div class="text overflow-hidden text-ellipsis nowrap flex col gap-4 flex-grow">
                <div class="name overflow-hidden text-ellipsis nowrap"><%= user.name %></div>
                <div class="flags flex flex-wrap align-center">
                    <div class="country flex gap-4 align-center">
                        <img src="<%= user.country.flag_url %>" class="flag rounded-4">
                        <span class="label"><%= user.country.name %></span>
                    </div>
                    <% if (user.team.id) { %>
                    <div class="team flex gap-4 align-center">
                        <img src="<%= user.team.flag_url %>" class="flag rounded-4">
                        <span class="label"><%= user.team.name %></span>
                    </div>
                    <% } %>
                </div>
            </div>
            <%- include('../partials/profile/basicStats', { stats }) %>
        </div>
        <%- include('../partials/profile/cardCompletionProgress', { user, stats, historyDaily, yearly, yearlyType, updateStatus }) %>
        <% if (recommended) { %>
        <%- include('../partials/profile/cardPlayNext', { recommended, recommendedQuery, category }) %>
        <% } %>
        <%- include('../partials/profile/cardRecentPasses', { recentPasses }) %>
    </div>
</div>