<%
    let percent = map_percentage_completed;
    let unit = 'maps';
    let completed = count_completed;
    let total = count_total;
    let color = map_completed_color;
    if (yearlyType == 'xp') {
        percent = time_percentage_completed;
        unit = 'cxp';
        completed = xp;
        total = xp_total;
        color = time_completed_color;
    }
    let tooltip = [
        `${map_percentage_completed.toFixed(2)}% maps passed (${count_completed.toLocaleString()} / ${count_total.toLocaleString()})`,
        `${time_percentage_completed.toFixed(2)}% cxp earned (${xp.toLocaleString()} / ${xp_total.toLocaleString()})`
    ].join('\\n')
%>

<div class="yearlyStatsEntry rounded-4 flex gap-8 align-center">
    <div class="year left flex-no-shrink"><%= year %></div>
    <div class="content flex col gap-4 flex-grow" title="<%= tooltip %>">
        <div class="values flex flex-wrap align-end">
            <div class="percent">
                <span><%= percent.toFixed(2) %>%</span>
            </div>
            <div class="count top">
                <span><%= completed.toLocaleString() %> / <%= total.toLocaleString() %> <%= unit %></span>
            </div>
        </div>
        <div class="bar w-full relative rounded-4 overflow-hidden">
            <div class="filling absolute h-full rounded-4"
                style="width: <%= utils.clamp(utils.ceilToNearest(percent, 1), 2, 100) %>%; background: <%= color %>">
            </div>
        </div>
    </div>
</div>